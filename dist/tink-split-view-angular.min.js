/*! tink-split-view-angular v1.0.0 */
"use strict";!function(module){try{module=angular.module("tink.split-view")}catch(e){module=angular.module("tink.split-view",["ngSanitize"])}module.directive("tinkContentView",[function(){return{require:"^tinkMasterDetailView",restirct:"E",templateUrl:"templates/tinkContentView.html",scope:!0,transclude:!0,replace:!0,link:function(scope,elem,attr,ctrl){ctrl.addView(elem),elem.on("$destroy",function(){scope.$destroy()}),scope.$on("$destroy",function(){ctrl.removeView($(elem))})}}}])}(),function(module){try{module=angular.module("tink.split-view")}catch(e){module=angular.module("tink.split-view",["ngSanitize"])}module.directive("tinkListItem",[function(){return{require:"^tinkListView",restirct:"EA",scope:{tinkListItem:"="},link:function(scope,elem,attr,ctrl){var id=scope.tinkListItem,object={id:id,elem:$(elem)};id&&(ctrl.addItem(object),elem.on("$destroy",function(){scope.$destroy()}),scope.$on("$destroy",function(){ctrl.removeItem(object)}),$(elem).bind("click",function(){scope.$apply(function(){ctrl.setActiveItem(id)})}))}}}])}(),function(module){try{module=angular.module("tink.split-view")}catch(e){module=angular.module("tink.split-view",["ngSanitize"])}module.directive("tinkListView",[function(){return{require:["tinkListView","^tinkMasterDetailView"],restirct:"E",templateUrl:"templates/tinkListView.html",scope:{tinkActiveItem:"=",itemChange:"&"},transclude:!0,replace:!0,terminal:!0,controller:function($scope,$rootScope){function callChange(item){var callData="";item&&(callData={$active:item.id}),$scope.itemChange(callData),$rootScope.$broadcast("tink-list-item-click",callData)}function setElementActive(item){return void 0!==item&&null!==item&&items[item.id]?void(activeItem&&activeItem.id===item.id||(activeItem&&$(activeItem.elem).removeClass("active"),callChange(item),activeItem=item,$(activeItem.elem).addClass("active"))):(activeItem&&($scope.tinkActiveItem=void 0,ctrl.unselect()),void(activeItem=item))}var activeItem,ctrl=this,items={};this.unselect=function(){activeItem&&($(activeItem.elem).removeClass("active"),activeItem=void 0,callChange(activeItem))},this.getActiveItem=function(){return activeItem},this.setElementActive=function(id){setElementActive(items[id]?items[id]:id?{id:id}:void 0)},this.setActiveItem=function(id){$scope.tinkActiveItem=id},this.addItem=function(item){items[item.id]?items[item.id]:(items[item.id]=item,activeItem&&item.id===activeItem.id&&(activeItem=null,ctrl.setElementActive(item.id)))},this.removeItem=function(item){items[item.id]&&delete items[item.id]}},link:function(scope,elem,attr,ctrl){var ctrlList=ctrl[0],ctrlListView=ctrl[1];ctrlListView.addView(elem),elem.on("$destroy",function(){scope.$destroy()}),scope.$on("$destroy",function(){}),scope.$watch("tinkActiveItem",function(newData){ctrlList.setElementActive(newData)})}}}])}(),function(module){try{module=angular.module("tink.split-view")}catch(e){module=angular.module("tink.split-view",["ngSanitize"])}module.directive("tinkMasterDetailView",[function(){return{restirct:"E",templateUrl:"templates/tinkMasterDetailView.html",transclude:"true",replace:!0,scope:{tinkIsResizable:"="},controller:function($scope,$element){function addview(element){null===$split.first||void 0===$split.first?($split.first=$(element),$split.bar=$('<div class="split-handle"></div>'),$(element).after($split.bar)):null===$split.second||void 0===$split.second?($split.second=$(element),$scope.$watch("tinkIsResizable",function(value){angular.isDefined(value)&&($isResizable=value===!0||"true"===value),$isResizable?ctrl.addReziseEvent():ctrl.removeResizeEvent()})):console.warn("there is already a first and second element !")}function changeX(e){var pageX=pointerEventToXY(e).x,x=(pageX-$split.first.offset().left)/$element.main.outerWidth(!0)*100;x>10&&90>x&&($split.first.css("width",x+"%"),$split.bar.css("left","calc("+x+"% - 3px)"),$split.second.css("width",100-x+"%"))}function changeY(e){var pageY=pointerEventToXY(e).y,y=(pageY-$split.first.offset().top)/$element.main.outerHeight(!0)*100;y>10&&90>y&&($split.first.css("height",y+"%"),$split.bar.css("top","calc("+y+"% - 3px)"),$split.second.css("height",100-y+"%"))}var ctrl=this;$element={listView:void 0,contentView:void 0,main:void 0};var $split={first:void 0,second:void 0,bar:void 0},$direction="vertical",$isResizable=!0,pointerEventToXY=function(e){var out={x:0,y:0};if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type){var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];out.x=touch.pageX,out.y=touch.pageY}else("mousedown"===e.type||"mouseup"===e.type||"mousemove"===e.type||"mouseover"===e.type||"mouseout"===e.type||"mouseenter"===e.type||"mouseleave"===e.type)&&(out.x=e.pageX,out.y=e.pageY);return out};this.addView=function(element){void 0===$split.first||void 0===$split.second?addview($(element)):$(element).remove()},this.removeView=function(element){$($split.first).get(0)===$(element).get(0)?($split.first=void 0,null!==$split.bar&&($split.bar.remove(),$split.bar=void 0)):$($split.second).get(0)===$(element).get(0)&&($split.second=void 0)},this.setInitSize=function(size){size=parseInt(size),size>=7&&90>=size&&$split.first&&$split.second&&("horizontal"===$direction?($split.first.css("height",size+"%"),$split.second.css("height",100-size+"%"),void 0!==$split.bar&&$split.bar.css("top","calc("+size+"% - 3px)")):($split.first.css("width",size+"%"),$split.second.css("width",100-size+"%"),void 0!==$split.bar&&$split.bar.css("left","calc("+size+"% - 3px)")))},this.setVertical=function(){$direction="vertical"},this.setHorizontal=function(){$direction="horizontal"},this.setMain=function(element){$element.main=element},this.addReziseEvent=function(){void 0!==$split.bar&&$split.bar.bind("mousedown touchstart",function(){return $(document).bind("mousemove touchmove",function(e){return"vertical"===$direction?($("html").addClass("col-resize"),changeX(e)):"horizontal"===$direction&&($("html").addClass("row-resize"),changeY(e)),!1}),$(document).bind("mouseup touchend",function(){return $("html").removeClass("row-resize").removeClass("col-resize"),$(document).unbind("mousemove touchmove mouseup touchend"),!1}),!1})},this.removeResizeEvent=function(){null!==$split.bar&&$split.bar.unbind("mousedown touchstart")}},link:function(scope,elem,attr,ctrl){ctrl.setMain($(elem)),attr.tinkSplitViewDirection&&"horizontal"===attr.tinkSplitViewDirection?(elem.addClass("split-view-horizontal"),ctrl.setHorizontal()):(elem.addClass("split-view-vertical"),ctrl.setVertical()),attr.tinkInitSize&&ctrl.setInitSize(attr.tinkInitSize),scope.$on("$destroy",function(){ctrl.removeResizeEvent()})}}}])}(),angular.module("tink.split-view").run(["$templateCache",function($templateCache){$templateCache.put("templates/tinkContentView.html","<div class=split-pane ng-transclude> </div>"),$templateCache.put("templates/tinkListView.html","<div class=split-pane ng-transclude> </div>"),$templateCache.put("templates/tinkMasterDetailView.html","<div ng-transclude> </div>")}]);
//# sourceMappingURL=tink-split-view-angular.min.js.map